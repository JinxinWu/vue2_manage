webpackJsonp([1],{D8ng:function(e,t){},DARQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),l=a.n(r),o=a("woOf"),s=a.n(o),n=a("exGp"),i=a.n(n),c=a("//Fk"),u=a.n(c),d={name:"upload",props:["uploadList"],data:function(){return{uploadFileList:[]}},created:function(){this.uploadList&&(this.uploadFileList=this.uploadList)},methods:{uploadListRequest:function(e){var t=this,a=new FormData;a.append("file",e.file);this.$axios.post(url,a,{header:{"Content-Type":"multipart/form-data;"}}).then(function(e){e.data.success?(t.$emit("uploadFile",e.data.id),t.$message.success("文件上传成功!")):t.$message.error(e.data.message)}).catch(function(e){console.log(e)})},uploadFileBeforeRemove:function(e,t){var a=this;return new u.a(function(t,r){a.$confirm("确定删除 "+e.name+"？").then(function(){e.id?a.$axios.post(url,{fileId:e.id}).then(function(e){e.data.success?(a.$message.success("删除成功"),a.$emit("removeFile"),t()):(a.$message.error(e.data.message),r())}).catch(function(e){r(),console.log(e)}):(a.$message.success("删除成功"),a.$emit("removeFile"),t())}).catch(function(){r()})})},handlePreview:function(e){var t=this;return i()(l.a.mark(function a(){var r,o;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.id){a.next=5;break}return a.next=3,t.$axios.get(url,{params:{fileId:e.id}});case 3:(r=a.sent).data.success?((o=document.createElement("a")).href=r.data.data,document.body.appendChild(o),o.click(),document.body.removeChild(o)):t.$message.error(r.data.message);case 5:case"end":return a.stop()}},a,t)}))()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{ref:"importUpload",staticClass:"import-upload",attrs:{limit:"1",accept:".png, .jpeg, .jpg ","file-list":e.uploadFileList,"before-remove":e.uploadFileBeforeRemove,"on-change":e.uploadFileHandleChange,"on-preview":e.handlePreview,"http-request":e.uploadListRequest}},[a("el-button",{attrs:{size:"small",icon:"el-icon-upload el-icon--right"}},[e._v("上传文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n      支持扩展名：.png .jpeg .jpg ，文件大小限制 10M。\n    ")])],1)],1)},staticRenderFns:[]},p={components:{Upload:a("VU/8")(d,m,!1,null,null,null).exports},data:function(){return{form:{id:"",name:"",code:"",lecturer:"",category:"",price:"",desc:"",courseUrl:""},categoryList:[{value:"1001",label:"前端",children:[{value:"100101",label:"html5"},{value:"100102",label:"vue"},{value:"100103",label:"node"},{value:"100104",label:"react"},{value:"100105",label:"javascript"}]},{value:"1002",label:"后端",children:[{value:"100201",label:"springboot"},{value:"100202",label:"微服务"},{value:"100203",label:"Redis"}]},{value:"1003",label:"移动端",children:[{value:"100301",label:"iOS"},{value:"100302",label:"Android"},{value:"100303",label:"Flutter"}]}],lecturerList:[{id:123123,name:"尤雨溪"},{id:123124,name:"知否君"},{id:123125,name:"工藤新一"}],cascaderProps:{value:"id",label:"name",children:"child"},rules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],category:[{required:!0,message:"请选择课程分类",trigger:"change"}],lecturer:[{required:!0,message:"请选择课程分类",trigger:"change"}],desc:[{required:!0,message:"请输入课程简介",trigger:"blur"}]}}},created:function(){this.getCourseCategory(),this.$route.query.id&&this.getCourseDetail()},methods:{getCourseDetail:function(){var e=this;return i()(l.a.mark(function t(){var a,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/course/detail",{params:{id:id}});case 2:a=t.sent,(r=a.data).success&&s()(e.form,r.data);case 5:case"end":return t.stop()}},t,e)}))()},getCourseCategory:function(){var e=this;return i()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/course/getCategory");case 2:(a=t.sent).data.success?e.categoryList=a.data.data:e.$message.error(a.data.message);case 4:case"end":return t.stop()}},t,e)}))()},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.form.id?"/course/update":"/course/save";t.$axios.post(a,t.form).then(function(e){e.data.success?(t.$message.success("保存成功！"),t.$router.go(-1)):t.$message.error(e.data.msg)})})},uploadFile:function(e){this.form.courseUrl.push(e)},removeFile:function(e){var t=this.form.courseUrl,a=t.findIndex(function(t){if(t.id==e)return!0});-1!=a&&t.splice(a,1)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"课程名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程分类:",prop:"category"}},[a("el-cascader",{staticStyle:{width:"440px"},attrs:{placeholder:"请选择课程分类",options:e.categoryList},on:{change:e.handleChange},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程售价:"}},[a("el-input-number",{attrs:{min:1,max:9999,step:1,precision:2},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程讲师:",prop:"lecturer"}},[a("el-select",{attrs:{placeholder:"请选择讲师"},model:{value:e.form.lecturer,callback:function(t){e.$set(e.form,"lecturer",t)},expression:"form.lecturer"}},e._l(e.lecturerList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"课程封面:"}},[a("Upload",{ref:"uploadFile",attrs:{"upload-list":e.form.courseUrl},on:{uploadFile:e.uploadFile,removeFile:e.removeFile}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程简介",prop:"desc"}},[a("el-input",{staticStyle:{width:"440px"},attrs:{maxlength:"1000","show-word-limit":"",type:"textarea",placeholder:"请输入课程简介"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.$router.back()}}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(p,f,!1,function(e){a("D8ng")},"data-v-cf2b6e92",null);t.default=v.exports}});